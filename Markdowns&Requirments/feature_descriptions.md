# Feature Descriptions

This document details the features generated by the ML engineering pipeline for S&P 500 prediction.

## Trend Features
*Source: `features/trend.py`*

### `MA_Dist_200`
- **Description**: Distance of the closing price from its 200-day Simple Moving Average (SMA).
- **Formula**: $(Close - SMA_{200}) / SMA_{200}$
- **Logic**: Measures the extension of the trend. High positive values indicate overbought conditions relative to the long-term trend, while negative values indicate oversold conditions.

### `Hurst`
- **Description**: Rolling Hurst Exponent (100-day window).
- **Formula**: Calculated using a simplified Rescaled Range (R/S) analysis on a rolling window.
- **Logic**: Measures the long-term memory of the time series.
    - $H < 0.5$: Mean reverting series.
    - $H = 0.5$: Random walk (geometric Brownian motion).
    - $H > 0.5$: Trending series (persistence).

## Volatility Features
*Source: `features/volatility.py`*

### `RV_Ratio`
- **Description**: Ratio of Short-term to Long-term Realized Volatility.
- **Formula**: $RV_{5d} / RV_{20d}$
- **Logic**: Identifies volatility regime changes. A ratio > 1 indicates expanding volatility (short-term > long-term), while < 1 indicates contracting volatility.

### `GARCH_Forecast`
- **Description**: Next-day variance forecast using a GARCH(1,1) model.
- **Formula**: Fits a GARCH(1,1) model ($\sigma^2_t = \omega + \alpha \epsilon^2_{t-1} + \beta \sigma^2_{t-1}$) on returns.
- **Logic**: Provides a forward-looking estimate of volatility clustering. The model is refitted every 20 days to adapt to changing market dynamics.

## Breadth Features
*Source: `features/breadth.py`*

### `Vol_ROC`
- **Description**: 5-day Rate of Change of Volume.
- **Formula**: $(Volume_t - Volume_{t-5}) / Volume_{t-5}$
- **Logic**: Measures the momentum of trading activity. Surges in volume often precede or accompany significant price moves.

### `Stocks_Above_50MA`
- **Description**: Percentage of stocks trading above their 50-day Moving Average.
- **Proxy**: Due to data limitations (`^NYA50` availability), this is currently proxied using SPY itself:
    - Returns `100.0` if SPY > 50-day SMA.
    - Returns `0.0` if SPY < 50-day SMA.
- **Logic**: A market breadth indicator. In a healthy rally, a high percentage of stocks should participate.

## Cross-Asset Features
*Source: `features/cross_asset.py`*

### `HY_Spread`
- **Description**: High Yield Corporate Bond Spread Proxy.
- **Formula**: $Price(HYG) / Price(SHY)$
- **Logic**: Measures risk appetite. A rising ratio indicates outperformance of high-yield bonds (risk-on), while a falling ratio indicates stress in credit markets (risk-off).

### `USD_Trend`
- **Description**: Trend of the US Dollar Index (DXY).
- **Formula**: 1-day change of the 50-day SMA of `DX-Y.NYB`.
- **Logic**: Strength in the USD often correlates negatively with equities and commodities.

### `Oil_Deviation`
- **Description**: Oil Price deviation from trend.
- **Formula**: $(Price_{Oil} - SMA_{50}) / SMA_{50}$
- **Logic**: Extreme deviations in energy prices can impact inflation expectations and equity valuations.

## Macro Features
*Source: `features/macro.py`*

### `Yield_Curve`
- **Description**: 10-Year minus 2-Year Treasury Yield Spread.
- **Formula**: $T10Y2Y$ (from FRED).
- **Logic**: A leading indicator for economic recessions. An inverted curve (negative value) often precedes downturns.

### `ISM_PMI`
- **Description**: ISM Manufacturing PMI.
- **Formula**: `NAPM` (from FRED).
- **Logic**: A key economic indicator. Values > 50 indicate expansion, while < 50 indicate contraction.
- **Note**: Currently returning `NaN` due to data unavailability from FRED source.

## Sentiment Features
*Source: `features/sentiment.py`*

### `Put_Call_Ratio`
- **Description**: CBOE Equity Put/Call Ratio.
- **Formula**: `^CPC` (from yfinance).
- **Logic**: A contrarian indicator. High values indicate fear (bearish sentiment), often marking market bottoms. Low values indicate complacency.
- **Note**: Currently using a placeholder (0.0) due to data unavailability.

### `Imp_Real_Gap`
- **Description**: Gap between Implied and Realized Volatility.
- **Formula**: $(VIX / 100) - RealizedVol_{20d}(SPY)$
- **Logic**: Measures the risk premium. A large positive gap implies options are expensive (fear), while a negative gap implies options are cheap relative to actual movement.
